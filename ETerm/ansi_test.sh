#!/bin/bash
# ANSI 颜色测试脚本 - 用于调试 ETerm 的字符渲染问题

echo "=== ETerm ANSI 渲染测试 ==="
echo ""

# 1. 基础颜色测试
echo "--- 1. 基础前景色测试 ---"
echo -e "\033[38;2;255;153;51m橙色前景文本\033[0m"
echo -e "\033[38;2;153;153;153m灰色前景文本\033[0m"
echo -e "\033[38;2;255;255;255m白色前景文本\033[0m"
echo ""

# 2. 问题字符测试（只有前景色，无背景色）
echo "--- 2. 问题字符测试（无背景色）---"
echo -e "\033[38;2;153;153;153m∴\033[0m Thought 符号 (U+2234)"
echo -e "\033[38;2;255;153;51m·\033[0m Middle Dot (U+00B7)"
echo -e "\033[38;2;255;153;51m✢\033[0m Four Teardrop Asterisk (U+2722)"
echo -e "\033[38;2;255;153;51m✳\033[0m Eight Spoked Asterisk (U+2733)"
echo -e "\033[38;2;255;153;51m✶\033[0m Six Pointed Star (U+2736)"
echo -e "\033[38;2;255;255;255m⏺\033[0m Record Symbol (U+23FA)"
echo ""

# 3. 对照组：普通 ASCII 字符
echo "--- 3. 对照组：ASCII 字符 ---"
echo -e "\033[38;2;255;153;51m*\033[0m 普通星号"
echo -e "\033[38;2;255;153;51m.\033[0m 普通点"
echo ""

# 4. 显式背景色测试
echo "--- 4. 显式背景色测试 ---"
echo -e "\033[38;2;255;255;255m\033[48;2;0;128;0m绿色背景白字\033[0m"
echo -e "\033[38;2;255;255;255m\033[48;2;0;0;255m蓝色背景白字\033[0m"
echo -e "\033[38;2;255;255;255m\033[48;2;55;55;55m深灰背景白字\033[0m"
echo ""

# 5. INVERSE 测试
echo "--- 5. INVERSE 测试 ---"
echo -e "\033[7mINVERSE 模式\033[0m"
echo -e "\033[38;2;255;153;51m\033[7m橙色+INVERSE\033[0m"
echo ""

# 6. 问题字符 + 显式黑色背景
echo "--- 6. 问题字符 + 显式黑色背景 ---"
echo -e "\033[38;2;255;153;51m\033[48;2;0;0;0m✳\033[0m 显式黑色背景"
echo -e "\033[38;2;255;255;255m\033[48;2;0;0;0m⏺\033[0m 显式黑色背景"
echo ""

# 7. 完整模拟 Claude Code 输出
echo "--- 7. 模拟 Claude Code 输出 ---"
echo -e "\033[38;2;153;153;153m∴ Thought for 1s (\033[1mctrl+o\033[22m to show thinking)\033[0m"
echo -e "\033[38;2;255;153;51m✳\033[0m \033[38;2;244;148;116mCatapulting…\033[0m"
echo -e "\033[38;2;255;255;255m⏺\033[0m pong"
echo ""

echo "=== 测试完成 ==="
