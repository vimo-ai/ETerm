import{d as A,r as u,w as E,b as s,e,g as T,f as x,F as g,i as _,z as I,h as N,v as R,A as C,y as h,k as n,t as d,q as M,j as V,l as j}from"./index-BCZSM4OO.js";import{i as D}from"./index-CUYCQoRX.js";import{r as L}from"./markdown-rpY00XHr.js";import{_ as O}from"./GlitchText.vue_vue_type_script_setup_true_lang-KTHYRbQd.js";const U={class:"h-full flex flex-col relative overflow-hidden"},K={class:"flex-none p-6 border-b border-white/5 bg-surface-100/80 backdrop-blur-md z-10 flex items-center justify-between"},F={class:"flex items-center gap-4"},H={class:"flex-1 overflow-y-auto p-6 space-y-8 scroll-smooth"},$={key:0,class:"h-full flex flex-col items-center justify-center opacity-50"},q={key:0,class:"flex justify-end mb-8"},z={class:"max-w-[80%]"},B={class:"flex items-center justify-end gap-2 mb-2"},G={class:"text-xs font-mono text-gray-500"},P={class:"bg-surface-200/50 border border-neon-cyan/30 p-4 rounded-lg rounded-tr-none text-white font-mono text-sm shadow-[0_0_15px_rgba(0,243,255,0.1)]"},W={key:1,class:"flex justify-start"},Y={class:"max-w-[90%] w-full"},Q={class:"flex items-center gap-2 mb-2"},X={class:"text-xs font-mono text-gray-500"},J={key:0,class:"text-[10px] font-mono text-gray-600 border border-gray-700 px-1 rounded"},Z={class:"bg-surface-100/80 border border-white/10 p-6 rounded-lg rounded-tl-none relative overflow-hidden group"},ee=["innerHTML"],te={key:0,class:"mt-6 pt-4 border-t border-white/5"},oe={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},se=["onClick"],ne={class:"flex items-center justify-between mb-1"},ae={class:"text-xs font-mono text-neon-cyan truncate max-w-[150px]"},re={class:"text-[10px] font-mono text-gray-600"},le={class:"text-xs text-gray-400 line-clamp-2 font-mono opacity-70 group-hover/source:opacity-100 transition-opacity"},ie={key:1,class:"max-w-4xl mx-auto w-full"},de={class:"flex-none p-6 bg-surface-100/80 backdrop-blur-xl border-t border-white/5 z-20"},ce={class:"max-w-4xl mx-auto relative group"},ue={class:"relative flex items-center bg-black/40 border border-white/10 group-hover:border-neon-cyan/30 rounded-lg transition-colors overflow-hidden"},xe=["disabled"],pe=["disabled"],fe=A({__name:"AskView",setup(p){const f=j(),a=u(""),r=u(!1),l=u([]),v=u(null),m=u(null);E(l,()=>{h(()=>{m.value?.scrollIntoView({behavior:"smooth"})})},{deep:!0});async function b(){if(!a.value.trim()||r.value)return;const i=a.value;a.value="",r.value=!0,l.value.push({type:"user",content:i,timestamp:Date.now()});try{const t=await D({question:i,contextWindow:5,maxSources:5});l.value.push({type:"ai",content:t.answer,sources:t.sources,model:t.model,timestamp:Date.now()})}catch(t){console.error("Ask failed:",t),l.value.push({type:"ai",content:"⚠️ SYSTEM ERROR: Neural Link Disconnected. Please try again.",timestamp:Date.now()})}finally{r.value=!1,h(()=>{v.value?.focus()})}}function w(i,t){f.push(`/sessions/${i}?highlight=${t}`)}function y(i){return new Date(i).toLocaleTimeString()}return(i,t)=>(n(),s("div",U,[t[12]||(t[12]=e("div",{class:"absolute inset-0 pointer-events-none"},[e("div",{class:"absolute top-0 left-1/4 w-[500px] h-[500px] bg-neon-cyan/5 rounded-full blur-[100px]"}),e("div",{class:"absolute bottom-0 right-1/4 w-[500px] h-[500px] bg-neon-violet/5 rounded-full blur-[100px]"})],-1)),e("div",K,[e("div",F,[T(O,{text:"NEURAL LINK",class:"text-2xl font-bold text-white"}),t[1]||(t[1]=e("span",{class:"text-xs font-mono text-neon-cyan px-2 py-0.5 border border-neon-cyan/30 rounded bg-neon-cyan/5"},"ONLINE",-1))]),t[2]||(t[2]=e("div",{class:"text-xs font-mono text-gray-500"}," MEMEX RAG SYSTEM v1.0 ",-1))]),e("div",H,[l.value.length===0?(n(),s("div",$,[...t[3]||(t[3]=[e("div",{class:"i-carbon-ibm-watson-discovery text-6xl text-neon-cyan mb-4 animate-pulse"},null,-1),e("p",{class:"font-mono text-neon-cyan"},"AWAITING INPUT...",-1)])])):x("",!0),(n(!0),s(g,null,_(l.value,(o,k)=>(n(),s("div",{key:k,class:"max-w-4xl mx-auto w-full animate-fade-in-up"},[o.type==="user"?(n(),s("div",q,[e("div",z,[e("div",B,[e("span",G,d(y(o.timestamp)),1),t[4]||(t[4]=e("span",{class:"text-xs font-mono text-neon-cyan"},"USER",-1))]),e("div",P,d(o.content),1)])])):(n(),s("div",W,[e("div",Y,[e("div",Q,[t[5]||(t[5]=e("span",{class:"text-xs font-mono text-neon-violet"},"AI_CORE",-1)),e("span",X,d(y(o.timestamp)),1),o.model?(n(),s("span",J,d(o.model),1)):x("",!0)]),e("div",Z,[e("div",{class:"prose prose-invert prose-sm max-w-none font-sans leading-relaxed",innerHTML:M(L)(o.content)},null,8,ee),o.sources&&o.sources.length>0?(n(),s("div",te,[t[6]||(t[6]=e("div",{class:"text-xs font-mono text-gray-500 mb-3 flex items-center gap-2"},[e("div",{class:"i-carbon-data-reference"}),V(" DATA SOURCES ")],-1)),e("div",oe,[(n(!0),s(g,null,_(o.sources,(c,S)=>(n(),s("button",{key:S,onClick:me=>w(c.sessionId,c.messageIndex),class:"text-left p-3 bg-black/20 border border-white/5 hover:border-neon-cyan/30 hover:bg-neon-cyan/5 rounded transition-all group/source"},[e("div",ne,[e("span",ae,d(c.projectName),1),e("span",re,d((c.score*100).toFixed(0))+"% MATCH",1)]),e("div",le,d(c.snippet),1)],8,se))),128))])])):x("",!0),t[7]||(t[7]=e("div",{class:"absolute top-0 left-0 w-2 h-2 border-t border-l border-neon-violet opacity-50"},null,-1))])])]))]))),128)),r.value?(n(),s("div",ie,[...t[8]||(t[8]=[I('<div class="flex justify-start" data-v-e98678f3><div class="bg-surface-100/50 border border-white/5 p-4 rounded-lg rounded-tl-none flex items-center gap-3" data-v-e98678f3><div class="flex gap-1" data-v-e98678f3><div class="w-1.5 h-1.5 bg-neon-cyan rounded-full animate-bounce" style="animation-delay:0ms;" data-v-e98678f3></div><div class="w-1.5 h-1.5 bg-neon-cyan rounded-full animate-bounce" style="animation-delay:150ms;" data-v-e98678f3></div><div class="w-1.5 h-1.5 bg-neon-cyan rounded-full animate-bounce" style="animation-delay:300ms;" data-v-e98678f3></div></div><span class="text-xs font-mono text-neon-cyan animate-pulse" data-v-e98678f3>PROCESSING...</span></div></div>',1)])])):x("",!0),e("div",{ref_key:"messagesEndRef",ref:m},null,512)]),e("div",de,[e("div",ce,[t[10]||(t[10]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-neon-cyan/20 to-neon-violet/20 rounded-lg blur-md opacity-0 group-hover:opacity-100 transition-opacity duration-500"},null,-1)),e("div",ue,[N(e("input",{ref_key:"inputRef",ref:v,"onUpdate:modelValue":t[0]||(t[0]=o=>a.value=o),type:"text",placeholder:"ASK A QUESTION...",class:"w-full bg-transparent border-none focus:ring-0 focus:outline-none text-white placeholder-gray-600 px-6 py-4 font-mono",disabled:r.value,onKeydown:C(b,["enter"]),autofocus:""},null,40,xe),[[R,a.value]]),e("button",{onClick:b,disabled:!a.value.trim()||r.value,class:"px-6 py-4 text-neon-cyan hover:text-white hover:bg-neon-cyan/20 transition-colors disabled:opacity-30 disabled:cursor-not-allowed"},[...t[9]||(t[9]=[e("div",{class:"i-carbon-send-alt text-xl"},null,-1)])],8,pe)])]),t[11]||(t[11]=e("div",{class:"max-w-4xl mx-auto mt-2 text-center"},[e("p",{class:"text-[10px] text-gray-600 font-mono"},"AI CAN MAKE MISTAKES. VERIFY WITH SOURCES.")],-1))])]))}}),ve=(p,f)=>{const a=p.__vccOpts||p;for(const[r,l]of f)a[r]=l;return a},he=ve(fe,[["__scopeId","data-v-e98678f3"]]);export{he as default};
