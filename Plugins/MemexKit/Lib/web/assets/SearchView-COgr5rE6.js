import{d as X,r as u,c as Q,w as C,o as W,a as Z,b as s,e as t,f as c,n as p,g as ee,h as L,v as M,F as m,i as E,t as r,j as te,u as ne,k as a,l as oe,m as se}from"./index-BCZSM4OO.js";import{s as ae,a as re,g as le,b as ie,c as ce}from"./index-CUYCQoRX.js";import{_ as de}from"./GlitchText.vue_vue_type_script_setup_true_lang-KTHYRbQd.js";const ue={class:"w-full max-w-4xl px-6 z-10 flex flex-col items-center"},pe={class:"mb-4"},ve={class:"flex items-center gap-2 mb-8 font-mono text-xs"},xe={class:"w-full relative group"},ye={class:"relative flex items-center bg-surface-100/80 backdrop-blur-xl border border-white/10 group-hover:border-neon-cyan/30 transition-colors"},be=["placeholder"],fe={key:0,class:"pr-6"},ge={key:0,class:"flex items-center gap-2 mt-4 font-mono text-xs"},me=["onClick"],he={key:0,class:"ml-4 text-gray-600"},we={key:1,class:"w-full mt-8 flex flex-col items-center gap-4 font-mono text-xs animate-fade-in-up"},ke={class:"flex items-center gap-4 p-2 bg-surface-100/50 border border-white/10 rounded-lg backdrop-blur-md"},_e={class:"relative group/project"},Se={class:"flex items-center gap-2"},Ce={key:0,class:"absolute top-full left-0 mt-2 w-[300px] max-h-[400px] overflow-y-auto bg-surface-100 border border-neon-cyan/30 rounded shadow-[0_0_30px_rgba(0,0,0,0.8)] backdrop-blur-xl z-50 flex flex-col py-2"},Ee=["onClick"],Te={class:"truncate"},De={class:"flex items-center gap-2 bg-black/40 border border-white/10 rounded px-3 py-1.5 hover:border-neon-cyan/30 transition-colors group/date"},Ie={key:2,class:"flex gap-12 mt-16 font-mono text-xs text-gray-500"},Re={class:"flex flex-col items-center gap-2"},Ne={class:"text-2xl text-white font-display"},je={class:"flex flex-col items-center gap-2"},Ae={class:"text-2xl text-white font-display"},Le={class:"flex flex-col items-center gap-2"},Me={class:"text-2xl text-white font-display"},Ue={key:0,class:"w-full max-w-4xl px-6 mt-8 pb-32 overflow-y-auto scroll-smooth h-full"},Oe={key:0,class:"text-center py-20 opacity-50"},Pe={key:1,class:"space-y-4"},$e=["onClick"],Ve={class:"relative z-10"},Fe={class:"flex items-center justify-between mb-3 font-mono text-xs"},He={class:"flex items-center gap-3"},ze={class:"inline-flex items-center gap-1 px-2 py-0.5 rounded bg-white/5 border border-white/10 text-[10px] uppercase tracking-wide"},Ye={class:"text-neon-cyan"},qe={key:0,class:"text-gray-500"},Be={key:1,class:"text-gray-400"},Je={class:"text-gray-500"},Ke={class:"text-neon-cyan/70"},Ge={class:"flex items-center gap-2"},Xe={key:0,class:"text-neon-violet"},Qe={key:1,class:"text-neon-cyan"},We={key:2,class:"text-orange-400"},Ze={key:1,class:"text-gray-600"},et=["innerHTML"],tt={key:2,class:"space-y-4"},nt=["onClick"],ot={class:"relative z-10"},st={class:"flex items-center justify-between mb-3 font-mono text-xs"},at={class:"flex items-center gap-3"},rt={class:"inline-flex items-center px-2 py-0.5 rounded bg-white/5 border border-white/10 text-[10px] uppercase tracking-wide"},lt=["innerHTML"],it={class:"flex items-center gap-2"},ct={class:"text-gray-600"},dt={class:"font-mono text-sm text-gray-300 leading-relaxed"},ut={class:"flex items-center gap-4"},pt={class:"text-neon-violet uppercase"},vt={class:"text-neon-cyan"},xt={class:"text-gray-400"},mt=X({__name:"SearchView",setup(yt){const T=oe(),F=ne(),i=u(""),y=u([]),b=u([]),_=u(!1),h=u(null),D=u(null),l=u("content"),f=u("hybrid"),I=u([]),d=u(void 0),v=u(""),x=u(""),g=u(!1),w=Q(()=>!!i.value.trim());let R=null,U=!0;function H(){const o=F.query;i.value=o.q||"",l.value=o.type||"content",f.value=o.mode||"hybrid",d.value=o.projectId?Number(o.projectId):void 0,v.value=o.startDate||"",x.value=o.endDate||""}function k(){if(U)return;const o={};i.value.trim()&&(o.q=i.value.trim()),l.value!=="content"&&(o.type=l.value),f.value!=="hybrid"&&l.value==="content"&&(o.mode=f.value),d.value!==void 0&&(o.projectId=String(d.value)),v.value&&(o.startDate=v.value),x.value&&(o.endDate=x.value),T.replace({query:o})}C(i,o=>{if(R&&clearTimeout(R),!o.trim()){y.value=[],b.value=[],k();return}R=setTimeout(async()=>{k(),await S(o)},300)}),C(l,()=>{y.value=[],b.value=[],i.value="",k()}),C(f,()=>{k(),i.value.trim()&&l.value==="content"&&S(i.value)}),C([d,v,x],()=>{k(),i.value.trim()&&l.value==="content"&&S(i.value)});async function S(o){if(o.trim()){_.value=!0;try{l.value==="content"?(y.value=await ae(o,{mode:f.value,limit:20,projectId:d.value,startDate:v.value||void 0,endDate:x.value||void 0}),b.value=[]):(b.value=await re(o,20),y.value=[])}catch(e){console.error("Search failed:",e),y.value=[],b.value=[]}finally{_.value=!1}}}async function z(){try{h.value=await le(),D.value=await ie()}catch(o){console.error("Failed to load stats:",o)}}async function Y(){try{I.value=await ce()}catch(o){console.error("Failed to load projects:",o)}}function O(o){"sessionId"in o?T.push(`/sessions/${o.sessionId}`):T.push(`/sessions/${o.id}`)}function P(o,e){if(!e.trim())return o;const n=new RegExp(`(${q(e)})`,"gi");return o.replace(n,'<mark class="bg-neon-cyan/20 text-neon-cyan px-0.5 rounded font-medium shadow-[0_0_10px_rgba(0,243,255,0.2)]">$1</mark>')}function q(o){return o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function B(o,e=200){return o.length<=e?o:o.slice(0,e)+"..."}function N(o){return new Date(o).toLocaleString()}function J(o){return o.source?o.source.toUpperCase():"CLAUDE"}function j(o){return o.channel?o.channel.toUpperCase():null}W(async()=>{await Promise.all([z(),Y()]),H(),i.value.trim()&&await S(i.value),U=!1,document.addEventListener("click",$)}),Z(()=>{document.removeEventListener("click",$)});function $(o){const e=o.target;g.value&&!e.closest(".group\\/project")&&(g.value=!1)}function K(){g.value=!g.value}function V(o){d.value=o,g.value=!1}function G(){d.value=void 0,v.value="",x.value=""}return(o,e)=>(a(),s("div",{class:p(["h-full flex flex-col items-center justify-center relative transition-all duration-700",{"justify-start pt-20":w.value}])},[t("div",{class:p(["absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-neon-cyan/5 rounded-full blur-[100px] pointer-events-none transition-all duration-1000",{"w-[800px] h-[300px] -translate-y-full opacity-20":w.value}])},null,2),t("div",ue,[t("div",{class:p(["mb-12 text-center transition-all duration-500",{"opacity-0 h-0 overflow-hidden mb-0":w.value}])},[t("div",pe,[ee(de,{text:"MEMEX ORACLE",class:"text-5xl font-bold text-white"})]),e[6]||(e[6]=t("p",{class:"text-gray-500 font-mono text-sm tracking-widest"},"ACCESSING NEURAL ARCHIVES...",-1))],2),t("div",ve,[e[7]||(e[7]=t("span",{class:"text-gray-600 mr-2"},"SEARCH TYPE:",-1)),t("button",{onClick:e[0]||(e[0]=n=>l.value="content"),class:p(["px-4 py-2 border transition-all uppercase tracking-wider",l.value==="content"?"border-neon-cyan text-black bg-neon-cyan font-bold":"border-white/20 text-gray-300 hover:border-white/40 hover:text-white"])}," CONTENT ",2),t("button",{onClick:e[1]||(e[1]=n=>l.value="sessionId"),class:p(["px-4 py-2 border transition-all uppercase tracking-wider",l.value==="sessionId"?"border-neon-cyan text-black bg-neon-cyan font-bold":"border-white/20 text-gray-300 hover:border-white/40 hover:text-white"])}," SESSION ID ",2)]),t("div",xe,[e[10]||(e[10]=t("div",{class:"absolute inset-0 bg-gradient-to-r from-neon-cyan/20 to-neon-violet/20 rounded-none blur-md opacity-0 group-hover:opacity-100 transition-opacity duration-500"},null,-1)),t("div",ye,[e[9]||(e[9]=t("div",{class:"pl-6 text-neon-cyan"},[t("div",{class:"i-carbon-search text-2xl"})],-1)),L(t("input",{"onUpdate:modelValue":e[2]||(e[2]=n=>i.value=n),type:"text",placeholder:l.value==="content"?"ENTER QUERY COMMAND...":"ENTER SESSION ID PREFIX...",class:"w-full bg-transparent border-none focus:ring-0 focus:outline-none focus-visible:outline-none text-xl font-mono text-white placeholder-gray-600 px-6 py-6 uppercase tracking-wider",autofocus:""},null,8,be),[[M,i.value]]),_.value?(a(),s("div",fe,[...e[8]||(e[8]=[t("div",{class:"i-carbon-circle-dash animate-spin text-2xl text-neon-cyan"},null,-1)])])):c("",!0)]),e[11]||(e[11]=t("div",{class:"absolute top-0 left-0 w-2 h-2 border-t border-l border-neon-cyan opacity-50"},null,-1)),e[12]||(e[12]=t("div",{class:"absolute top-0 right-0 w-2 h-2 border-t border-r border-neon-cyan opacity-50"},null,-1)),e[13]||(e[13]=t("div",{class:"absolute bottom-0 left-0 w-2 h-2 border-b border-l border-neon-cyan opacity-50"},null,-1)),e[14]||(e[14]=t("div",{class:"absolute bottom-0 right-0 w-2 h-2 border-b border-r border-neon-cyan opacity-50"},null,-1))]),l.value==="content"?(a(),s("div",ge,[e[15]||(e[15]=t("span",{class:"text-gray-600 mr-2"},"MODE:",-1)),(a(),s(m,null,E(["fts","hybrid","vector"],n=>t("button",{key:n,onClick:A=>f.value=n,class:p(["px-3 py-1.5 border transition-all uppercase tracking-wider",f.value===n?"border-neon-cyan text-black bg-neon-cyan font-bold":"border-white/20 text-gray-300 hover:border-white/40 hover:text-white"])},r(n==="fts"?"KEYWORD":n==="vector"?"SEMANTIC":"HYBRID"),11,me)),64)),D.value?(a(),s("span",he," ["+r(D.value.indexedMessages.toLocaleString())+" VECTORS] ",1)):c("",!0)])):c("",!0),l.value==="content"?(a(),s("div",we,[t("div",ke,[t("div",_e,[t("button",{class:"flex items-center gap-3 px-4 py-2 bg-black/40 border border-white/10 hover:border-neon-cyan/50 rounded transition-all min-w-[200px] justify-between group-hover/project:shadow-[0_0_15px_rgba(0,243,255,0.1)]",onClick:K},[t("div",Se,[e[16]||(e[16]=t("div",{class:"i-carbon-cube text-neon-cyan"},null,-1)),t("span",{class:p(d.value?"text-white":"text-gray-400")},r(d.value?I.value.find(n=>n.id===d.value)?.path.split("/").pop():"ALL PROJECTS"),3)]),e[17]||(e[17]=t("div",{class:"i-carbon-chevron-down text-gray-500 transition-transform group-hover/project:text-neon-cyan"},null,-1))]),g.value?(a(),s("div",Ce,[t("button",{class:p(["px-4 py-3 text-left hover:bg-neon-cyan/10 hover:text-neon-cyan transition-colors flex items-center gap-2 border-b border-white/5",{"text-neon-cyan bg-neon-cyan/5":d.value===void 0}]),onClick:e[3]||(e[3]=n=>V(void 0))},[...e[18]||(e[18]=[t("div",{class:"i-carbon-apps"},null,-1),te(" ALL PROJECTS ",-1)])],2),(a(!0),s(m,null,E(I.value,n=>(a(),s("button",{key:n.id,class:p(["px-4 py-3 text-left hover:bg-neon-cyan/10 hover:text-neon-cyan transition-colors flex items-center gap-2 text-gray-300",{"text-neon-cyan bg-neon-cyan/5":d.value===n.id}]),onClick:A=>V(n.id)},[e[19]||(e[19]=t("div",{class:"i-carbon-folder text-gray-500"},null,-1)),t("span",Te,r(n.path.split("/").pop()||n.path),1)],10,Ee))),128))])):c("",!0)]),e[23]||(e[23]=t("div",{class:"w-px h-8 bg-white/10"},null,-1)),t("div",De,[e[20]||(e[20]=t("div",{class:"i-carbon-calendar text-gray-500 group-hover/date:text-neon-cyan transition-colors"},null,-1)),L(t("input",{"onUpdate:modelValue":e[4]||(e[4]=n=>v.value=n),type:"date",class:"bg-transparent border-none text-white focus:ring-0 p-0 w-[110px] uppercase tracking-wider text-center placeholder-gray-600",placeholder:"START"},null,512),[[M,v.value]]),e[21]||(e[21]=t("span",{class:"text-gray-600"},"â†’",-1)),L(t("input",{"onUpdate:modelValue":e[5]||(e[5]=n=>x.value=n),type:"date",class:"bg-transparent border-none text-white focus:ring-0 p-0 w-[110px] uppercase tracking-wider text-center placeholder-gray-600",placeholder:"END"},null,512),[[M,x.value]])]),d.value!==void 0||v.value||x.value?(a(),s("button",{key:0,onClick:G,class:"ml-2 w-8 h-8 flex items-center justify-center rounded-full border border-neon-violet/30 text-neon-violet hover:bg-neon-violet hover:text-black hover:shadow-[0_0_15px_rgba(188,19,254,0.5)] transition-all",title:"Clear Filters"},[...e[22]||(e[22]=[t("div",{class:"i-carbon-close"},null,-1)])])):c("",!0)])])):c("",!0),h.value&&!w.value?(a(),s("div",Ie,[t("div",Re,[t("span",Ne,r(h.value.projectCount),1),e[24]||(e[24]=t("span",{class:"tracking-widest"},"NODES",-1))]),t("div",je,[t("span",Ae,r(h.value.sessionCount),1),e[25]||(e[25]=t("span",{class:"tracking-widest"},"LINKS",-1))]),t("div",Le,[t("span",Me,r(h.value.messageCount),1),e[26]||(e[26]=t("span",{class:"tracking-widest"},"DATA",-1))])])):c("",!0)]),w.value?(a(),s("div",Ue,[!_.value&&y.value.length===0&&b.value.length===0?(a(),s("div",Oe,[...e[27]||(e[27]=[t("div",{class:"font-mono text-neon-cyan mb-2"},"NO MATCHES FOUND",-1),t("div",{class:"text-xs text-gray-600"},"TRY ADJUSTING QUERY PARAMETERS",-1)])])):l.value==="content"?(a(),s("div",Pe,[(a(!0),s(m,null,E(y.value,n=>(a(),s("div",{key:n.messageId,class:"group relative bg-surface-100/50 border border-white/5 p-6 cursor-pointer hover:bg-surface-200/50 hover:border-neon-cyan/30 transition-all duration-300",onClick:A=>O(n)},[e[31]||(e[31]=t("div",{class:"absolute inset-0 bg-neon-cyan/5 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"},null,-1)),t("div",Ve,[t("div",Fe,[t("div",He,[t("span",{class:p(("messageType"in n?n.messageType:n.type)==="user"?"text-neon-cyan":"text-neon-violet")},r(("messageType"in n?n.messageType:n.type)==="user"?"USER":"SYSTEM"),3),e[29]||(e[29]=t("span",{class:"text-gray-600"},"::",-1)),t("span",ze,[t("span",Ye,r(J(n)),1),j(n)?(a(),s("span",qe,"/")):c("",!0),j(n)?(a(),s("span",Be,r(j(n)),1)):c("",!0)]),e[30]||(e[30]=t("span",{class:"text-gray-600"},"::",-1)),t("span",Je,r(n.sessionId.slice(0,8)),1),"projectName"in n&&n.projectName?(a(),s(m,{key:0},[e[28]||(e[28]=t("span",{class:"text-gray-600"},"/",-1)),t("span",Ke,r(n.projectName),1)],64)):c("",!0)]),t("div",Ge,["sources"in n?(a(),s(m,{key:0},[n.sources.fts&&n.sources.vector?(a(),s("span",Xe,"FTS+VEC")):n.sources.fts?(a(),s("span",Qe,"FTS")):n.sources.vector?(a(),s("span",We,"VEC")):c("",!0)],64)):c("",!0),"timestamp"in n?(a(),s("span",Ze,r(N(n.timestamp)),1)):c("",!0)])]),t("div",{class:"font-mono text-sm text-gray-300 leading-relaxed line-clamp-3",innerHTML:P(B(n.snippet||n.content),i.value)},null,8,et)])],8,$e))),128))])):l.value==="sessionId"?(a(),s("div",tt,[(a(!0),s(m,null,E(b.value,n=>(a(),s("div",{key:n.id,class:"group relative bg-surface-100/50 border border-white/5 p-6 cursor-pointer hover:bg-surface-200/50 hover:border-neon-cyan/30 transition-all duration-300",onClick:A=>O(n)},[e[40]||(e[40]=t("div",{class:"absolute inset-0 bg-neon-cyan/5 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"},null,-1)),t("div",ot,[t("div",st,[t("div",at,[e[32]||(e[32]=t("span",{class:"text-neon-cyan"},"SESSION",-1)),e[33]||(e[33]=t("span",{class:"text-gray-600"},"::",-1)),t("span",rt,[t("span",{style:se({color:(n.source||"claude").toLowerCase()==="claude"?"#D97757":"#00f3ff"})},r(n.source?n.source.toUpperCase():"CLAUDE"),5)]),e[34]||(e[34]=t("span",{class:"text-gray-600"},"::",-1)),t("span",{class:"text-white font-bold",innerHTML:P(n.id,i.value)},null,8,lt)]),t("div",it,[t("span",ct,r(N(n.createdAt)),1)])]),t("div",dt,[t("div",ut,[e[35]||(e[35]=t("span",{class:"text-gray-500"},"Status:",-1)),t("span",pt,r(n.status),1),e[36]||(e[36]=t("span",{class:"text-gray-600"},"|",-1)),e[37]||(e[37]=t("span",{class:"text-gray-500"},"Messages:",-1)),t("span",vt,r(n.messageCount),1),e[38]||(e[38]=t("span",{class:"text-gray-600"},"|",-1)),e[39]||(e[39]=t("span",{class:"text-gray-500"},"Updated:",-1)),t("span",xt,r(N(n.updatedAt)),1)])])])],8,nt))),128))])):c("",!0)])):c("",!0)],2))}});export{mt as default};
